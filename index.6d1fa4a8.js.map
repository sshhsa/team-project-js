{"mappings":"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","sources":["src/js/categories.js","src/js/modal-item-home.js","src/js/gallery-categories.js","src/index.js"],"sourcesContent":["import { getCategoryList, getBooksCategory } from './api-books';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { modalOpen } from './modal-item-home';\n\nconst filterListEl = document.querySelector('.filter__list');\nlet varWithActiveValueFilter = document.querySelector('.filter__item--active');\nconst booksList = document.querySelector('.js-gallery-best-books');\nconst galleryTitle = document.querySelector('.gallery-title');\nconst allCategories = document.querySelector('.filter__item');\n\nlet varWithCurrentCategoryValue = 'ALL CATEGORIES';\nconst bookApi = getCategoryList();\n\ngetCategoryList().then(categorie => {\n  if (!categorie.length) {\n    Notify.failure('Oops something going wrong.');\n    return;\n  }\n  filterListEl.insertAdjacentHTML('beforeend', createMarkup(categorie));\n});\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      value =>\n        `<li class=\"filter__item\" data-mark-active=\"${value.list_name}\">${value.list_name}</li>`\n    )\n    .join('');\n}\n\nallCategories.addEventListener('click', event => {\n  if (event.target.textContent === 'All categories') {\n    location.reload();\n    return;\n  }\n});\n\nfilterListEl.addEventListener('click', event => {\n  if (\n    event.target.outerText.toLowerCase() ===\n    varWithCurrentCategoryValue.toLowerCase()\n  ) {\n    return;\n  }\n\n  varWithCurrentCategoryValue = event.target.outerText;\n\n  addGalleryMarkupAndChangeFilter();\n\n  if (event.target.textContent === 'All categories') {\n    location.reload();\n    return;\n  }\n\n  addCardsByCategory();\n});\n\nfunction addGalleryMarkupAndChangeFilter() {\n  const targetEl = document.querySelector(\n    `[data-mark-active=\"${varWithCurrentCategoryValue}\"]`\n  );\n\n  const activeElement = document.querySelector('.filter__item--active');\n  if (activeElement) {\n    activeElement.classList.remove('filter__item--active');\n  }\n\n  varWithActiveValueFilter.classList.remove('filter__item--active');\n\n  targetEl.classList.add('filter__item--active');\n\n  varWithActiveValueFilter = targetEl;\n}\nconsole.log(varWithActiveValueFilter);\n\n// Рендер карток книжок по категоріям\nfunction addCardsByCategory() {\n  const categoryValue = varWithActiveValueFilter.innerHTML;\n  getBooksCategory(categoryValue).then(booksArr => {\n    if (!booksArr.length) {\n      Notify.failure(\n        `Sorry, there are no ${categoryValue} books. Please choose another category.`\n      );\n      return;\n    }\n\n    galleryTitle.innerHTML = categoryValue;\n    booksList.innerHTML = createMoreBooks(booksArr);\n\n    addColorToTitle();\n    addModal();\n\n    // bookGalleryCard.forEach(book => {\n    //   book.addEventListener('click', e => {\n    //     const bookId = e.currentTarget.id;\n    //     modalOpen(bookId);\n    //   });\n    // });\n  });\n}\n\n// Створення карток книжок по категоріям\nfunction createMoreBooks(booksArr) {\n  const bookCard = booksArr\n    .map(({ _id, book_image, title, author }) => {\n      //  Перевірка чи пришла обложка книги з бекенду і заміна її на заглушку в разі необхідності //\n      if (!book_image) {\n        book_image = '../images/book_plug.jpg';\n      }\n\n      const markup = `<li id=\"${_id}\" class=\"books-gallery__card\">\n     <div class=\"card-container\">\n     <img class=\"books-gallery__card-img\" src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\">\n     <div class=\"port-overlay\"><p>quick view</p></div>\n     </div>\n     <h2 class=\"books-gallery__card-title\">${title}</h2>\n     <p class=\"books-gallery__card-author\">${author}</p>\n     </li>`;\n\n      return markup;\n    })\n    .join('');\n\n  return bookCard;\n}\n\n// Додавання акцентного кольолру до заголовку з назвою категорії списку книг\nfunction addColorToTitle() {\n  const categoryValue = varWithActiveValueFilter.innerHTML;\n\n  let wordsArray = categoryValue.split(' ');\n  let lastWord = wordsArray.pop();\n  let firstPart = wordsArray.join(' ');\n\n  galleryTitle.innerHTML = `${firstPart} <span class=\"books-gallery__title-accent\">${lastWord}</span>`;\n}\n\nfunction onBtnOpen(evt) {\n  const bookId = evt.currentTarget.id;\n  modalOpen(bookId);\n}\n\n// Відкриття модального вікна при кліку по картці\nfunction addModal() {\n  const booksGalleryCards = document.querySelectorAll('.books-gallery__card');\n\n  booksGalleryCards.forEach(card => {\n    card.addEventListener('click', onBtnOpen);\n  });\n}\n\nexport { addGalleryMarkupAndChangeFilter };\n","import {\n  user,\n  setUserInLS,\n  getUserFromLS,\n  isUserSet,\n  updateUserDatabase,\n} from './auth-modal.js';\nimport { getBooksId } from './api-books.js';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { loadLS, saveLS } from './storage.js';\n\nconst modal = document.querySelector('.backdrop');\n\nconst shopUserBooks = JSON.parse(localStorage.getItem('user-shop-list')) || [];\n\nlet currUser;\nif (localStorage.getItem('user')) {\n  currUser = getUserFromLS();\n}\n\nlet userBooks;\nif (loadLS('books')) {\n  userBooks = loadLS('books');\n} else userBooks = [];\n\nlet idBook;\nlet bookData;\nlet btnContainer;\nlet flag = true;\n\nfunction modalOpen(id) {\n  getBooksId(id).then(data => {\n    //   Перевірка чи не пришли пусті дані //\n    if (!data) {\n      Notify.failure('Sorry, an error has occurred');\n      return;\n    }\n    idBook = id;\n    bookData = data;\n    const modalBody = document.querySelector('.js-modal-body');\n    modalBody.innerHTML = '';\n    modalBody.insertAdjacentHTML('beforeend', createModalMarcup(data));\n    const btnMarcup = '<div class = \"js-btn-container\"></div>';\n    if (flag) {\n      modalBody.insertAdjacentHTML('afterend', btnMarcup);\n    }\n    btnContainer = document.querySelector('.js-btn-container');\n    btnContainer.innerHTML = createButtonMarcup(id);\n    openModalWindow();\n\n    const buttonAdd = document.querySelector('.modal__button');\n    if (buttonAdd) {\n      buttonAdd.addEventListener('click', onButtonAddClick);\n    }\n\n    const buttonRemove = document.querySelector('.modal__button-remove');\n    if (buttonRemove) {\n      buttonRemove.addEventListener('click', onButtonRemoveClick);\n    }\n\n    const btnClose = document.querySelector('.js-close');\n    btnClose.addEventListener('click', closeModalWindow);\n  });\n}\n\nfunction createModalMarcup({\n  author,\n  book_image,\n  title,\n  description,\n  buy_links,\n}) {\n  if (!book_image) {\n    book_image = '../images/book_plug.jpg';\n  }\n\n  if (!description) {\n    description =\n      'Discover a captivating tale that transports you to a world of imagination and wonder. Dive into the pages of this enchanting book, where compelling characters and thrilling plot twists await.';\n  }\n\n  let amazonLink;\n  let appleBooksLink;\n  let bookshopLink;\n\n  buy_links.forEach(element => {\n    if (element.name === 'Amazon') {\n      amazonLink = element.url;\n    }\n\n    if (element.name === 'Apple Books') {\n      appleBooksLink = element.url;\n    }\n\n    if (element.name === 'Bookshop') {\n      bookshopLink = element.url;\n    }\n  });\n  return `<div class=\"modal__body\">\n      <img src=\"${book_image}\" alt=\"${title}\" class=\"modal__img\">\n      <div class=\"modal__box\">\n      <h2 class=\"modal__title\">${title}</h2>\n      <h3 class=\"modal__subtitle\">${author}</h3>\n      <p class=\"modal__text\">${description}</p>\n      <ul class=\"modal__social-list\">\n          <li class=\"modal__social-amazon\">\n            <a class=\"modal__link-social-amazon\" href=\"${amazonLink}\" target=\"_blank\"></a>\n          </li>\n          <li class=\"modal__social-open-book\">\n          <a\n          class=\"modal__link-social-open-book\"\n          href=\"${appleBooksLink}\"\n          target=\"_blank\"\n          ></a>\n          </li>\n          <li class=\"modal__social-book-shop\">\n          <a\n          class=\"modal__link-social-book-shop\"\n          href=\"${bookshopLink}\"\n          target=\"_blank\"\n          ></a>\n          </li>\n          </ul>\n          </div>\n          </div>`;\n}\n\nfunction createButtonMarcup(id) {\n  if (!isUserSet()) {\n    return `<p class=\"modal__congratulation\">\n            Sign in to add the book to your shopping list.\n            </p>`;\n  }\n\n  if (userBooks.indexOf(id) === -1) {\n    return `<button class=\"modal__button\">add to shopping list</button>`;\n  }\n\n  return `<button class=\"modal__button-remove\">\n          remove from the shopping list\n          </button>`;\n}\n\nfunction openModalWindow() {\n  modal.classList.add('is-block');\n  document.body.classList.add('disable-scroll');\n\n  document.addEventListener('keydown', onEscKeyPress);\n\n  const backdrop = document.querySelector('.backdrop');\n  backdrop.addEventListener('click', onBackdropClick);\n\n  function onBackdropClick(evt) {\n    if (evt.target.classList.contains('backdrop')) {\n      closeModalWindow();\n      backdrop.removeEventListener('click', onBackdropClick);\n    }\n    return;\n  }\n}\n\nfunction onEscKeyPress(evt) {\n  if (evt.code !== 'Escape') {\n    return;\n  }\n\n  closeModalWindow();\n  document.removeEventListener('keydown', onEscKeyPress);\n}\n\nfunction closeModalWindow() {\n  flag = false;\n  modal.classList.remove('is-block');\n  document.body.classList.remove('disable-scroll');\n}\n\nfunction onButtonAddClick() {\n  currUser.booksArr.push(idBook);\n  setUserInLS(currUser);\n  updateUserDatabase(currUser);\n\n  userBooks.push(idBook);\n  saveLS('books', userBooks);\n  shopUserBooks.push(bookData);\n  localStorage.setItem('user-shop-list', JSON.stringify(shopUserBooks));\n\n  btnContainer.innerHTML = createremoveMarkup();\n  const buttonRemove = document.querySelector('.modal__button-remove');\n  buttonRemove.addEventListener('click', onButtonRemoveClick);\n}\n\nfunction onButtonRemoveClick() {\n  currUser.booksArr.splice(currUser.booksArr.indexOf(idBook), 1);\n  setUserInLS(currUser);\n  updateUserDatabase(currUser);\n\n  userBooks.splice(currUser.booksArr.indexOf(idBook), 1);\n  saveLS('books', userBooks);\n\n  btnContainer.innerHTML = createAddMarkup();\n  const btnAdd = document.querySelector('.modal__button');\n  btnAdd.addEventListener('click', onButtonAddClick);\n}\n\nfunction createremoveMarkup() {\n  return `<div class=\"button__wrapper-remove\">\n  <button class=\"modal__button-remove\">\n  remove from the shopping list\n  </button>\n  </div>\n  <p class=\"modal__congratulation\">\n  Сongratulations! You have added the book to the shopping list. To\n  delete, press the button “Remove from the shopping list”.\n  </p>`;\n}\n\nfunction createAddMarkup() {\n  return `<div class=\"button__wrapper-remove\">\n  <button class=\"modal__button\">add to shopping list</button>\n  </div>\n  <p class=\"modal__congratulation\">\n  Сongratulations! You have removed the book from the shopping list. To\n  add, press the button “Add to shopping list”.\n  </p>`;\n}\n\nexport { modalOpen };\n","import { getTopBooks, getBooksCategory } from './api-books';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { modalOpen } from './modal-item-home';\n\nconst booksList = document.querySelector('.js-gallery-best-books');\nconst galleryTitle = document.querySelector('.gallery-title');\n\ngetTopBooks().then(data => {\n  if (!data.length) {\n    Notify.failure(\n      'Sorry, there are no best sellers books. Please choose a category.'\n    );\n    return;\n  }\n  galleryTitle.insertAdjacentHTML('beforeend', createTitleMarcup());\n  booksList.insertAdjacentHTML('beforeend', createBooklistMarcup(data));\n\n  const galeryList = document.querySelectorAll('.book-cards');\n  galeryList.forEach(element => {\n    element.addEventListener('click', onBtnOpen);\n  });\n});\n\nfunction createTitleMarcup() {\n  return 'Best Sellers <span class=\"gallery-title-span\">Books</span>';\n}\n\nfunction createBooklistMarcup(data) {\n  const marcup = [];\n\n  // Відображення необхідної кількості категорій  //\n\n  data.forEach((element, i) => {\n    const booksArr = data[i].books;\n    const bookCards = [];\n\n    booksArr.forEach(({ _id, book_image, title, author }) => {\n      //  Перевірка чи пришла обложка книги з бекенду і заміна її на заглушку в разі необхідності //\n      if (!book_image) {\n        book_image = '../images/book_plug.jpg';\n      }\n\n      const bookCardsMarcup = `<li id=\"${_id}\" class = \"book-cards\">\n              <div class = \"card-container\">\n                <img src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\">\n                  <div class=\"port-overlay\">\n                    <p>quick view</p>\n                  </div>\n              </div>\n                <h2>${title}</h2>\n                <p>${author}</p>\n                </li>`;\n\n      bookCards.push(bookCardsMarcup);\n    });\n\n    const btnSeeMore = `<button type=\"button\" id=\"${data[i].list_name}\" class=\"book-class-more\">\n        see more\n      </button>`;\n\n    marcup.push(`<li class = \"category-block\">\n            <p class = \"gallery-category-title\">${data[i].list_name}</p>\n            <ul class = \"category-block-list\">${bookCards.join('')}</ul>\n            ${btnSeeMore}\n            </li>`);\n  });\n\n  return marcup.join('');\n}\n\nfunction onBtnOpen(evt) {\n  const bookId = evt.currentTarget.id;\n  modalOpen(bookId);\n}\n\n//=================== ВІДОБРАЖЕННЯ КНИГ ПО КАТЕГОРІЯМ =============================\n\nconst eventLister = document.querySelector('.books-gallery');\nlet categoryValue = 'ALL CATEGORIES';\n\n// Рендер списку книг по категорії при кліку на \"see more\" кнопці\neventLister.addEventListener('click', onMoreBtnClick);\nfunction onMoreBtnClick(e) {\n  if (e.target.localName === 'button') {\n    categoryValue = e.target.getAttribute('id');\n\n    addCardsByCategory();\n    changeColorTitle(categoryValue);\n  }\n}\n\n// Рендер карток книжок по категоріям\nfunction addCardsByCategory() {\n  getBooksCategory(categoryValue).then(booksArr => {\n    if (!booksArr.length) {\n      Notify.failure(\n        `Sorry, there are no ${categoryValue} books. Please choose another category.`\n      );\n      return;\n    }\n\n    galleryTitle.innerHTML = categoryValue;\n    booksList.innerHTML = createMoreBooks(booksArr);\n\n    addColorToTitle();\n    addModal();\n  });\n}\n\n// Створення карток книжок по категоріям\nfunction createMoreBooks(booksArr) {\n  const bookCard = booksArr\n    .map(({ _id, book_image, title, author }) => {\n      //  Перевірка чи пришла обложка книги з бекенду і заміна її на заглушку в разі необхідності //\n      if (!book_image) {\n        book_image = '../images/book_plug.jpg';\n      }\n\n      const markup = `<li id=\"${_id}\" class=\"books-gallery__card\">\n        <div class=\"card-container\">\n        <img class=\"books-gallery__card-img\" src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\">\n        <div class=\"port-overlay\"><p>quick view</p></div>\n        </div>\n        <h2 class=\"books-gallery__card-title\">${title}</h2>\n        <p class=\"books-gallery__card-author\">${author}</p>\n        </li>`;\n\n      return markup;\n    })\n    .join('');\n\n  return bookCard;\n}\n\n// Додавання акцентного кольолру до заголовку з назвою категорії списку книг\nfunction addColorToTitle() {\n  const textgalleryTitle = galleryTitle.innerHTML;\n\n  let wordsArray = categoryValue.split(' ');\n  let lastWord = wordsArray.pop();\n  let firstPart = wordsArray.join(' ');\n\n  galleryTitle.innerHTML = `${firstPart} <span class=\"books-gallery__title-accent\">${lastWord}</span>`;\n}\n\nfunction changeColorTitle(title) {\n  const labelCategories = document.querySelectorAll('.filter__item');\n  const activeElement = document.querySelector('.filter__item--active');\n\n  activeElement.classList.remove('filter__item--active');\n  const selectedElement = [...labelCategories].find(({ textContent }) => {\n    return textContent === title;\n  });\n  console.log(selectedElement);\n  selectedElement.classList.add('filter__item--active');\n}\n\n// Відкриття модального вікна при кліку по картці\nfunction addModal() {\n  const booksGalleryCards = document.querySelectorAll('.books-gallery__card');\n\n  booksGalleryCards.forEach(card => {\n    card.addEventListener('click', onBtnOpen);\n  });\n}\n","import axios from 'axios';\nimport Notiflix from 'notiflix';\n\nimport './js/api-books';\n\nimport './js/header';\nimport './js/tumbler-theme';\n\nimport './js/auth-modal';\nimport './js/categories';\nimport './js/gallery-categories';\nimport './js/modal-item-home';\nimport './js/support-ukraine';\n\nimport './js/storage-methods';\nimport './js/pagination';\n\nimport './js/footer';\nimport './js/modal_footer';\n\nwindow.addEventListener('load', function () {\n  const conatinerAnimation = document.querySelector('.animation');\n  setTimeout(() => {\n    conatinerAnimation.style.display = 'none';\n  }, 2000);\n});\n"],"names":["$097b7549b37c6d19$var$currUser","$097b7549b37c6d19$var$userBooks","$097b7549b37c6d19$var$idBook","$097b7549b37c6d19$var$bookData","$097b7549b37c6d19$var$btnContainer","$lw1f2","parcelRequire","$cfOGF","$097b7549b37c6d19$var$modal","document","querySelector","$097b7549b37c6d19$var$shopUserBooks","JSON","parse","localStorage","getItem","getUserFromLS","$jzQFI","loadLS","$097b7549b37c6d19$var$flag","$097b7549b37c6d19$export$bcfd85ab6a968274","id","getBooksId","then","data","modalBody","innerHTML","insertAdjacentHTML","param","amazonLink","appleBooksLink","bookshopLink","author","book_image","title","description","buy_links","forEach","element","name","url","concat","$097b7549b37c6d19$var$createModalMarcup","isUserSet","indexOf","$097b7549b37c6d19$var$createButtonMarcup","classList","add","body","addEventListener","$097b7549b37c6d19$var$onEscKeyPress","backdrop","onBackdropClick","evt","target","contains","$097b7549b37c6d19$var$closeModalWindow","removeEventListener","$097b7549b37c6d19$var$openModalWindow","buttonAdd","$097b7549b37c6d19$var$onButtonAddClick","buttonRemove","$097b7549b37c6d19$var$onButtonRemoveClick","$h6c0i","Notify","failure","code","remove","booksArr","push","setUserInLS","updateUserDatabase","saveLS","setItem","stringify","splice","$7035cf87bda54340$var$filterListEl","$7035cf87bda54340$var$varWithActiveValueFilter","$7035cf87bda54340$var$booksList","$7035cf87bda54340$var$galleryTitle","$7035cf87bda54340$var$allCategories","$7035cf87bda54340$var$varWithCurrentCategoryValue","getCategoryList","$7035cf87bda54340$var$onBtnOpen","currentTarget","categorie","length","map","value","list_name","join","event","textContent","location","reload","categoryValue","outerText","toLowerCase","targetEl","activeElement","$7035cf87bda54340$export$49a973d52d368b29","getBooksCategory","wordsArray","lastWord","firstPart","_id","$7035cf87bda54340$var$createMoreBooks","split","pop","querySelectorAll","card","console","log","$8nrFW","$363be1ec9b5df41f$var$booksList","$363be1ec9b5df41f$var$galleryTitle","$363be1ec9b5df41f$var$onBtnOpen","getTopBooks","marcup","i","books","bookCards","bookCardsMarcup","btnSeeMore","$363be1ec9b5df41f$var$createBooklistMarcup","$363be1ec9b5df41f$var$eventLister","$363be1ec9b5df41f$var$categoryValue","e","localName","getAttribute","$363be1ec9b5df41f$var$createMoreBooks","$363be1ec9b5df41f$var$addColorToTitle","labelCategories","selectedElement","$parcel$interopDefault","find","$363be1ec9b5df41f$var$changeColorTitle","window","conatinerAnimation","setTimeout","style","display"],"version":3,"file":"index.6d1fa4a8.js.map"}