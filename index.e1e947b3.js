var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},t={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in o)return o[e].exports;if(e in t){var n=t[e];delete t[e];var l={id:e,exports:{}};return o[e]=l,n.call(l.exports,l,l.exports),l.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,o){t[e]=o},e.parcelRequired7c6=n),n("7Y9D8"),n("fA1we"),n("bUb57"),n("bPyuM"),n("gZ6M0");var l=n("fA1we"),s=n("iQIUW"),r=(l=n("fA1we"),s=n("iQIUW"),n("gZ6M0")),a=n("5uEKZ");const i=document.querySelector(".backdrop"),c=JSON.parse(localStorage.getItem("user-shop-list"))||[];let d,u,m,_,g=(0,r.getUserFromLS)();d=(0,a.loadLS)("books")?(0,a.loadLS)("books"):[];let p=!0;function b(e){(0,l.getBooksId)(e).then((o=>{if(!o)return void s.Notify.failure("Sorry, an error has occurred");u=e,m=o;const t=document.querySelector(".js-modal-body");t.innerHTML="",t.insertAdjacentHTML("beforeend",function({author:e,book_image:o,title:t,description:n,buy_links:l}){o||(o="../images/book_plug.jpg");n||(n="There is no description");let s,r,a;return l.forEach((e=>{"Amazon"===e.name&&(s=e.url),"Apple Books"===e.name&&(r=e.url),"Bookshop"===e.name&&(a=e.url)})),`<div class="modal__body">\n  <img src="${o}" alt="${t}" class="modal__img">\n  <div class="modal__box">\n  <h2 class="modal__title">${t}</h2>\n  <h3 class="modal__subtitle">${e}</h3>\n  <p class="modal__text">${n}</p>\n  <ul class="modal__social-list">\n  <li class="modal__social-amazon">\n  <a class="modal__link-social-amazon" href="${s}" target="_blank"></a>\n  </li>\n  <li class="modal__social-open-book">\n  <a\n  class="modal__link-social-open-book"\n  href="${r}"\n  target="_blank"\n  ></a>\n  </li>\n  <li class="modal__social-book-shop">\n  <a\n  class="modal__link-social-book-shop"\n  href="${a}"\n  target="_blank"\n  ></a>\n  </li>\n  </ul>\n  </div>\n  </div>`}(o));p&&t.insertAdjacentHTML("afterend",'<div class = "js-btn-container"></div>'),_=document.querySelector(".js-btn-container"),(0,r.isUserSet)()&&(g=(0,r.getUserFromLS)()),_.innerHTML=function({booksArr:e}=g,o){return(0,r.isUserSet)()?-1===d.indexOf(o)?'<button class="modal__button">add to shopping list</button>':'<button class="modal__button-remove">\n  remove from the shopping list\n  </button>':'<p class="modal__congratulation">\n    Sign in to add the book to your shopping list.\n        </p>'}(g,e),function(){i.classList.add("is-block"),document.body.classList.add("disable-scroll"),document.addEventListener("keydown",k);const e=document.querySelector(".backdrop");function o(t){t.target.classList.contains("backdrop")&&(f(),e.removeEventListener("click",o))}e.addEventListener("click",o)}();const n=document.querySelector(".modal__button");n&&n.addEventListener("click",y);const l=document.querySelector(".modal__button-remove");l&&l.addEventListener("click",v);document.querySelector(".js-close").addEventListener("click",f)}))}function k(e){"Escape"===e.code&&(f(),document.removeEventListener("keydown",k))}function f(){p=!1,i.classList.remove("is-block"),document.body.classList.remove("disable-scroll")}function y(){g.booksArr.push(u),(0,r.setUserInLS)(g),(0,r.updateUserDatabase)(g),d.push(u),(0,a.saveLS)("books",d),c.push(m),localStorage.setItem("user-shop-list",JSON.stringify(c)),_.innerHTML='<div class="button__wrapper-remove">\n  <button class="modal__button-remove">\n  remove from the shopping list\n  </button>\n  </div>\n<p class="modal__congratulation">\n  Сongratulations! You have added the book to the shopping list. To\n  delete, press the button “Remove from the shopping list”.\n  </p>';document.querySelector(".modal__button-remove").addEventListener("click",v)}function v(){g.booksArr.splice(g.booksArr.indexOf(u),1),(0,r.setUserInLS)(g),(0,r.updateUserDatabase)(g),d.splice(g.booksArr.indexOf(u),1),(0,a.saveLS)("books",d),_.innerHTML='<div class="button__wrapper-remove">\n  <button class="modal__button">add to shopping list</button>\n  </div>\n  <p class="modal__congratulation">\n  Сongratulations! You have removed the book from the shopping list. To\n  add, press the button “Add to shopping list”.\n  </p>';document.querySelector(".modal__button").addEventListener("click",y)}const h=document.querySelector(".filter__list");let L=document.querySelector(".filter__item--active");const S=document.querySelector(".js-gallery-best-books"),$=document.querySelector(".gallery-title"),T=document.querySelector(".filter__item");let q="ALL CATEGORIES";(0,l.getCategoryList)();function E(e){b(e.currentTarget.id)}(0,l.getCategoryList)().then((e=>{e.length?h.insertAdjacentHTML("beforeend",e.map((e=>`<li class="filter__item" data-mark-active="${e.list_name}">${e.list_name}</li>`)).join("")):s.Notify.failure("Oops something going wrong.")})),T.addEventListener("click",(e=>{"All categories"!==e.target.textContent||location.reload()})),h.addEventListener("click",(e=>{e.target.outerText.toLowerCase()!==q.toLowerCase()&&(q=e.target.outerText,function(){const e=document.querySelector(`[data-mark-active="${q}"]`),o=document.querySelector(".filter__item--active");o&&o.classList.remove("filter__item--active");L.classList.remove("filter__item--active"),e.classList.add("filter__item--active"),L=e}(),"All categories"!==e.target.textContent?function(){const e=L.innerHTML;console.log(e),(0,l.getBooksCategory)(e).then((o=>{o.length?($.innerHTML=e,S.innerHTML=function(e){return e.map((({_id:e,book_image:o,title:t,author:n})=>{o||(o="../images/book_plug.jpg");return`<li id="${e}" class="books-gallery__card">\n     <div class="card-container">\n     <img class="books-gallery__card-img" src="${o}" alt="${t}" loading="lazy">\n     <div class="port-overlay"><p>quick view</p></div>\n     </div>\n     <h2 class="books-gallery__card-title">${t}</h2>\n     <p class="books-gallery__card-author">${n}</p>\n     </li>`})).join("")}(o),function(){let e=L.innerHTML.split(" "),o=e.pop(),t=e.join(" ");$.innerHTML=`${t} <span class="books-gallery__title-accent">${o}</span>`}(),document.querySelectorAll(".books-gallery__card").forEach((e=>{e.addEventListener("click",E)}))):s.Notify.failure(`Sorry, there are no ${e} books. Please choose another category.`)}))}():location.reload())})),console.log(L);l=n("fA1we"),s=n("iQIUW");const A=document.querySelector(".js-gallery-best-books"),j=document.querySelector(".gallery-title");function M(e){b(e.currentTarget.id)}(0,l.getTopBooks)().then((e=>{if(!e.length)return void s.Notify.failure("Sorry, there are no best sellers books. Please choose a category.");j.insertAdjacentHTML("beforeend",'Best Sellers <span class="gallery-title-span">Books</span>'),A.insertAdjacentHTML("beforeend",function(e){const o=[];return e.forEach(((t,n)=>{const l=e[n].books,s=[];l.forEach((({_id:e,book_image:o,title:t,author:n})=>{o||(o="../images/book_plug.jpg");const l=`<li id="${e}" class = "book-cards">\n              <div class = "card-container">\n                <img src="${o}" alt="${t}" loading="lazy">\n                  <div class="port-overlay">\n                    <p>quick view</p>\n                  </div>\n              </div>\n                <h2>${t}</h2>\n                <p>${n}</p>\n                </li>`;s.push(l)}));const r=`<button type="button" id="${e[n].list_name}" class="book-class-more">\n        see more\n      </button>`;o.push(`<li class = "category-block">\n            <p class = "gallery-category-title">${e[n].list_name}</p>\n            <ul class = "category-block-list">${s.join("")}</ul>\n            ${r}\n            </li>`)})),o.join("")}(e));document.querySelectorAll(".book-cards").forEach((e=>{e.addEventListener("click",M)}))}));const w=document.querySelector(".books-gallery");let H="ALL CATEGORIES";w.addEventListener("click",(function(e){"button"===e.target.localName&&(H=e.target.getAttribute("id"),(0,l.getBooksCategory)(H).then((e=>{e.length?(j.innerHTML=H,A.innerHTML=function(e){return e.map((({_id:e,book_image:o,title:t,author:n})=>(o||(o="../images/book_plug.jpg"),`<li id="${e}" class="books-gallery__card">\n        <div class="card-container">\n        <img class="books-gallery__card-img" src="${o}" alt="${t}" loading="lazy">\n        <div class="port-overlay"><p>quick view</p></div>\n        </div>\n        <h2 class="books-gallery__card-title">${t}</h2>\n        <p class="books-gallery__card-author">${n}</p>\n        </li>`))).join("")}(e),function(){j.innerHTML;let e=H.split(" "),o=e.pop(),t=e.join(" ");j.innerHTML=`${t} <span class="books-gallery__title-accent">${o}</span>`}(),document.querySelectorAll(".books-gallery__card").forEach((e=>{e.addEventListener("click",M)}))):s.Notify.failure(`Sorry, there are no ${H} books. Please choose another category.`)})),function(e){const o=document.querySelectorAll(".filter__item");document.querySelector(".filter__item--active").classList.remove("filter__item--active");const t=[...o].find((({textContent:o})=>o===e));console.log(t),t.classList.add("filter__item--active")}(H))})),n("75VGX"),n("4PVUM"),n("2nhTy"),n("epHO8"),n("dmQj5");
//# sourceMappingURL=index.e1e947b3.js.map
