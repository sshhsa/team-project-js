{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-a34e92620445c9c8.js","src/shop-list.js","src/js/shoplist-gallery-categories.js","node_modules/@parcel/runtime-js/lib/runtime-fb5960c07fe41f89.js","node_modules/@parcel/runtime-js/lib/runtime-c10bbecf9fd9184c.js","node_modules/@parcel/runtime-js/lib/runtime-9fed184435a7ab29.js","node_modules/@parcel/runtime-js/lib/runtime-6470d009b32b682f.js","node_modules/@parcel/runtime-js/lib/runtime-79ac7523ea52fa17.js","node_modules/@parcel/runtime-js/lib/runtime-c120ca58a78c8f2f.js","node_modules/@parcel/runtime-js/lib/runtime-aec3850cfdaaf943.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"cYJPg\\\":\\\"shop-list.bebe63cc.js\\\",\\\"5EBN1\\\":\\\"amazon-shop-1x.d33dc585.png\\\",\\\"gpYer\\\":\\\"amazon-shop-2x.01f59d3f.png\\\",\\\"57kdw\\\":\\\"apple-shop-1x.aeb5cfd2.png\\\",\\\"7J0mh\\\":\\\"apple-shop-2x.df06fe16.png\\\",\\\"9D8Wc\\\":\\\"bookshop-1x.d3877644.png\\\",\\\"eYjm2\\\":\\\"bookshop-2x.bc4a3396.png\\\",\\\"37BJJ\\\":\\\"symbol-defs.c191696b.svg\\\",\\\"fY5NC\\\":\\\"shop-list.33e09f9f.css\\\",\\\"8y6Oc\\\":\\\"shop-list.9c66cea7.js\\\"}\"));","import './js/header.js';\nimport './js/tumbler-theme.js';\n\nimport './js/auth-modal.js';\nimport './js/api-books.js';\nimport './js/support-ukraine.js';\nimport './js/shoplist-gallery-categories.js';\n\nimport './js/modal_footer.js';\nimport './js/footer.js';\nimport './js/pagination.js';\n\nwindow.addEventListener('load', function () {\n  const conatinerAnimation = document.querySelector('.animation');\n  const body = document.querySelector('body');\n  setTimeout(() => {\n    conatinerAnimation.style.display = 'none';\n    body.classList.remove('overlay');\n  }, 2000);\n  body.classList.add('overlay');\n});\n","import {\n  setUserInLS,\n  getUserFromLS,\n  updateUserDatabase,\n} from './auth-modal.js';\n\nimport amazonImage1 from '../images/png/amazon-shop-1x.png';\nimport amazonImage2 from '../images/png/amazon-shop-2x.png';\nimport appleImage1 from '../images/png/apple-shop-1x.png';\nimport appleImage2 from '../images/png/apple-shop-2x.png';\nimport bookshopImage1 from '../images/png/bookshop-1x.png';\nimport bookshopImage2 from '../images/png/bookshop-2x.png';\n\nconst refs = {\n  navlinks: document.querySelectorAll('.active'),\n  shoppingListEl: document.querySelector('.shopping__cards'),\n  notificationContainerEl: document.querySelector('.shopping__storage'),\n  shoppingHeadingEl: document.querySelector('.shopping__heading'),\n  jsGuard: document.querySelector('.js-guard'),\n  logoTrashPath: new URL(\n    '../images/svg-sprite/symbol-defs.svg',\n    import.meta.url\n  ),\n};\n\nlet currUser = localStorage.getItem('user') ? getUserFromLS() : [];\nlet bookList = currUser.booksArr;\nlet userShoplist = currUser.bookDataArr;\n\nlet currentPage = 1;\nlet itemsPerPage = 5;\n// let bookCount = bookList.length;\n\nrenderShoppingList(userShoplist, currentPage);\n\n// let optionsObserver = {\n//   root: null,\n//   rootMargin: '600px',\n//   threshold: 1.0,\n// };\n// let observer = new IntersectionObserver(onLoad, optionsObserver);\n// function onLoad(entries) {\n//   entries.forEach(entry => {\n//     if (entry.isIntersecting) {\n//       currentPage++;\n//       renderShoppingList(userShoplist, currentPage);\n//     }\n//   });\n// }\n\nfunction renderShoppingList(data, page) {\n  const startIndex = (page - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  let currentData = data.slice(startIndex, endIndex);\n\n  if (currentData.length) {\n    removeEmptyNotificationContainer();\n    const markup = userShoplist\n      .map(\n        ({\n          _id,\n          book_image,\n          author,\n          book_image_width,\n          book_image_height,\n          title,\n          list_name,\n          description,\n          buy_links: [amazon, apple, , , bookshop],\n        }) => {\n          return `<li class=\"shopping__card\" data-id=\"${_id}\">\n  <div class=\"shopping__block\">\n    <div>\n      <div class=\"shopping__thumb\">\n        <img src=\"${book_image}\" alt=\"${list_name}\" class=\"shopping__book-img\" width=\"${book_image_width}\" height=\"${book_image_height}\"/>\n      </div>\n      <p class=\"shopping__book-author\">${author}</p>\n    </div>\n    <div class=\"shopping__wrap\">\n      <h2 class=\"shopping__title\">${title}</h2>\n      <p class=\"shopping__category\">${cutNameCategory(list_name)}</p>\n      <p class=\"shopping__book-description--tablet\">${description}</p>\n      <ul class=\"shopping__shops\">\n        <li class=\"shopping__shop\">\n          <a href=\"${\n            amazon.url\n          }\" class=\"shopping__shop-link\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Amazon-book site\">\n            <img srcset=\"${amazonImage1} 1x, ${amazonImage2} 2x\" src=\"${amazonImage1}\" alt=\"${\n            amazon.name\n          }\" class=\"shopping__shop-img\" width=\"48\" height=\"15\"/>\n          </a>\n        </li>\n        <li class=\"shopping__shop\">\n          <a href=\"${\n            apple.url\n          }\" class=\"shopping__shop-link\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Apple-book site\">\n            <img srcset=\"${appleImage1} 1x, ${appleImage2} 2x\" src=\"${appleImage1}\" alt=\"${\n            apple.name\n          }\" class=\"shopping__shop-img\" width=\"28\" height=\"27\"/>\n          </a>\n        </li>\n        <li class=\"shopping__shop\">\n          <a href=\"${\n            bookshop.url\n          }\" class=\"shopping__shop-link\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Book-shop site\">\n            <img srcset=\"${bookshopImage1} 1x, ${bookshopImage2} 2x\" src=\"${bookshopImage1}\" alt=\"${\n            bookshop.name\n          }\" class=\"shopping__shop-img\" width=\"32\" height=\"30\"/>\n          </a>\n        </li>\n      </ul>\n      <div class=\"shopping__wrap-shops--tablet\">\n      <p class=\"shopping__book-author--tablet\">${author}</p>\n      <ul class=\"shopping__shops--tablet\">\n        <li class=\"shopping__shop\">\n          <a href=\"${\n            amazon.url\n          }\" class=\"shopping__shop-link\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Amazon-book site\">\n            <img srcset=\"${amazonImage1} 1x, ${amazonImage2} 2x\" src=\"${amazonImage1}\" alt=\"${\n            amazon.name\n          }\" class=\"shopping__shop-img\" width=\"48\" height=\"15\"/>\n          </a>\n        </li>\n        <li class=\"shopping__shop\">\n          <a href=\"${\n            apple.url\n          }\" class=\"shopping__shop-link\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Apple-book site\">\n            <img srcset=\"${appleImage1} 1x, ${appleImage2} 2x\" src=\"${appleImage1}\" alt=\"${\n            apple.name\n          }\" class=\"shopping__shop-img\" width=\"28\" height=\"27\"/>\n          </a>\n        </li>\n        <li class=\"shopping__shop\">\n          <a href=\"${\n            bookshop.url\n          }\" class=\"shopping__shop-link\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Book-shop site\">\n            <img srcset=\"${bookshopImage1} 1x, ${bookshopImage2} 2x\" src=\"${bookshopImage1}\" alt=\"${\n            bookshop.name\n          }\" class=\"shopping__shop-img\" width=\"32\" height=\"30\"/>\n          </a>\n        </li>\n      </ul>\n      </div>\n      </div>\n  </div>\n  <button type=\"button\" class=\"shopping__btn\" aria-label=\"Delete the book from shopping list\" data-id=\"${_id}\">\n    <svg class=\"shopping__btn-icon\" width=\"18\" height=\"18\">\n      <use href=\"${refs.logoTrashPath}#icon-trash\"></use>\n    </svg>\n  </button>\n  <p class=\"shopping__book-description\">${description}</p>\n</li>`;\n        }\n      )\n      .join('');\n    refs.shoppingListEl.innerHTML = markup;\n    refs.shoppingListEl.addEventListener('click', onTrashClick);\n    // observer.observe(refs.jsGuard);\n    // if (currentPage === Math.ceil(bookCount / itemsPerPage)) {\n    //   observer.unobserve(refs.jsGuard);\n    // }\n  } else {\n    pasteEmptyNotificationContainer();\n  }\n}\n\nfunction pasteEmptyNotificationContainer() {\n  refs.shoppingListEl.innerHTML = '';\n  refs.notificationContainerEl.classList.add('empty-js');\n  refs.shoppingHeadingEl.style.marginBottom = '140px';\n}\n\nfunction removeEmptyNotificationContainer() {\n  refs.notificationContainerEl.classList.remove('empty-js');\n  refs.shoppingHeadingEl.style.marginBottom = '';\n  removeEventListener('click', onTrashClick);\n}\n\nfunction cutNameCategory(name) {\n  if (window.innerWidth <= 768) {\n    if (name.length > 20) {\n      return name.substring(0, 20) + '...';\n    }\n    return name;\n  }\n  return name;\n}\n\nfunction onTrashClick(e) {\n  const isButton = e.target\n    .closest('.shopping__btn')\n    .classList.contains('shopping__btn');\n  if (!isButton) {\n    return;\n  }\n\n  // const bookEl = target.closest('.shopping__btn').closest('.shopping__card');\n  const idToDelete = e.target.closest('.shopping__btn').dataset.id.trim();\n  const removedElIndexFromStorage = bookList.findIndex(\n    item => item === idToDelete\n  );\n\n  bookList.splice(removedElIndexFromStorage, 1);\n  userShoplist.splice(removedElIndexFromStorage, 1);\n  // let currUser = localStorage.getItem('user') ? getUserFromLS() : [];\n  currUser.booksArr = bookList;\n  currUser.bookDataArr = userShoplist;\n  setUserInLS(currUser);\n  updateUserDatabase(currUser);\n\n  // bookCount = bookList.length;\n  renderShoppingList(userShoplist, currentPage);\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"5EBN1\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"gpYer\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"57kdw\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"7J0mh\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"9D8Wc\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"eYjm2\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"37BJJ\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$gZ6M0","$f3e8de01acb66a67$exports","URL","resolve","import","meta","url","toString","$32b8866e0fbe8ec0$exports","$f80102d5fdfd543f$exports","$63cde6a0676257d0$exports","$41b1310166333f79$exports","$4259537de0e2deb2$exports","$28a95df86868d79d$exports","$325c62a306cfe754$var$refs","navlinks","document","querySelectorAll","shoppingListEl","querySelector","notificationContainerEl","shoppingHeadingEl","jsGuard","logoTrashPath","$325c62a306cfe754$var$currUser","localStorage","getItem","getUserFromLS","$325c62a306cfe754$var$bookList","booksArr","$325c62a306cfe754$var$userShoplist","bookDataArr","$325c62a306cfe754$var$renderShoppingList","data","page","startIndex","endIndex","slice","classList","remove","style","marginBottom","removeEventListener","$325c62a306cfe754$var$onTrashClick","markup","map","_id","book_image","author","book_image_width","book_image_height","title","list_name","description","buy_links","amazon","apple","bookshop","name","window","innerWidth","substring","$325c62a306cfe754$var$cutNameCategory","$parcel$interopDefault","join","innerHTML","addEventListener","add","e","target","closest","contains","idToDelete","dataset","trim","removedElIndexFromStorage","findIndex","item","splice","setUserInLS","updateUserDatabase","conatinerAnimation","body","setTimeout","display"],"version":3,"file":"shop-list.bebe63cc.js.map"}